---
---
<!doctype html>
<html class="no-js" lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Who Dumped Trump? ðŸ’”</title>
  <meta name="description" content="Find out where the Republican candidates running for House, Senate and Governor seats this year stand on Trump.">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
  <link rel="manifest" href="/manifest.json">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#cc0000">
  <meta name="theme-color" content="#ffffff">

  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/dt/dt-1.10.12/fh-3.1.2/r-2.1.0/sc-1.4.2/datatables.min.css"/>
  <link rel="stylesheet" href="css/main.css">

  <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
</head>
<body>
  <header>
    <h1 class="title">Who Dumped Trump? ðŸ’”</h1>
    <p class="lead">You deserve to know. Below you'll find where each of the Republican candidates running for House, Senate and Governor seats this year stand on <a href="https://www.washingtonpost.com/politics/trump-recorded-having-extremely-lewd-conversation-about-women-in-2005/2016/10/07/3b9ce776-8cb4-11e6-bf8a-3d26847eeed4_story.html">Trump's infamous bus comments.</a></p>
  </header>

  <section class="charts-section">
    <div class="circle-chart-container">
      <div class="circle-chart" id="chart1"></div>
    </div>
    <div class="circle-chart-container">
      <div class="circle-chart" id="chart2"></div>
    </div>
    <div class="circle-chart-container">
      <div class="circle-chart" id="chart3"></div>
    </div>
  </section>

  <section class="table-section">
    <table class="js-retractions-table retractions-table">
      <thead>
        <tr>
          <td>Name</td>
          <td>Position/Office</td>
          <td>State/District</td>
          <td>Denounced?</td>
          <td>Unendorsed?</td>
          <td>Source</td>
        </tr>
      </thead>
      <tbody>
        {% for retraction in site.data.retractions %}
          <tr
            data-office="{{ retraction.office }}"
            data-denounced="{{ retraction.denounced }}"
            data-unendorsed="{{ retraction.denounced }}"
          >
            <td>{{ retraction.name }}</td>
            <td>{{ retraction.office }}</td>
            <td>{{ retraction.district }}</td>
            <td>{{ retraction.denounced }}</td>
            <td>{{ retraction.unendorsed }}</td>
            <td>{% if retraction.source %}<a href="{{ retraction.source }}">Article</a>{% endif %}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </section>

  <footer>
    Brought to you by <a href="https://devprogress.us">DevProgress</a>.
  </footer>

  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <script src="//cdn.datatables.net/v/dt/dt-1.10.12/fh-3.1.2/r-2.1.0/sc-1.4.2/datatables.min.js"></script>
  <script src="//www.gstatic.com/charts/loader.js"></script>

  <script>
    //
    // Charts
    //

    window.tableData = [
      {% for retraction in site.data.retractions %}
      {
        office: "{{ retraction.office }}",
        denounced: "{{ retraction.denounced }}",
        unendorsed: "{{ retraction.denounced }}",
      },
      {% endfor %}
    ]

    google.charts.load('current', { packages:['corechart'] });

    function drawCirleChart(id, title, office) {
      var unendorsedCount = 0;
      var denouncedCount = 0;
      var noRemarkCount = 0;

      tableData.forEach(function(retraction) {
        if (retraction.office !== office) return;
        if (retraction.unendorsed === 'Yes') {
          unendorsedCount += 1;
          return;
        }
        if (retraction.denounced === 'Yes') {
          denouncedCount += 1;
          return;
        }
        noRemarkCount += 1;
      });

      var data = google.visualization.arrayToDataTable([
        ['Task', 'People'],
        ['Unendorsed', unendorsedCount],
        ['Denounced',  10],
        ['No Remark', noRemarkCount],
      ]);

      var options = {
        title: title,
        backgroundColor: 'transparent',
        legend: {
          position: 'bottom',
        },
        slices: {
          0: { color: '#aa0000' },
          1: { color: '#dd0000' },
          2: { color: '#ccc' }
        }
      };

      var chart = new google.visualization.PieChart(document.getElementById(id));
      chart.draw(data, options);
    }

    function drawCharts() {
      drawCirleChart('chart1', 'House Candidates', 'House');
      drawCirleChart('chart2', 'Senate Candidates', 'Senate');
      drawCirleChart('chart3', 'Governer Candidates', 'Governor');
    }

    google.charts.setOnLoadCallback(drawCharts);

    //
    // DataTable
    //

    $('.js-retractions-table').DataTable({
      order: [
        [ 3, "desc" ], [ 4, "desc" ]
      ],
      responsive: true,
      info:     false,
      paging: false,
      scrollY: 300,
    });
  </script>
  <script>
    (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
    function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
    e=o.createElement(i);r=o.getElementsByTagName(i)[0];
    e.src='//www.google-analytics.com/analytics.js';
    r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
    ga('create','UA-XXXXX-X','auto');ga('send','pageview');
  </script>
</body>
</html>
